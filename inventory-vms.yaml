---

all:
  children:
    all_vms:
      vars:
        vm_vbmc_username: admin
        vm_vbmc_password: secrete
      children:
        provisioned_vms:
          vars:
            vm_networks:
              uplink:
                dhcp: true
                interface: eth0
                manager: nmcli
              provisioning:
                dhcp: false
                interface: eth1
                manager: nmcli
              external:
                dhcp: false
                interface: eth2
                manager: nmcli
          children:
            provisioned_compute_hosts:
              children:
                provisioned_compute2:
                  vars:
                    vm_virt_host: "compute2"
                    vm_cores: 4  # Number of cores
                    vm_ram: 4096  # Size in MiB
                    vm_disk_size: 72  # Size in GiB
                    ooo_type: novacompute
                    overcloud_target: true
                  hosts:
                    compute2-vm-controller-1:
                      vm_image_name: centos7
                      ooo_type: controller
                      vm_cores: 6  # Number of cores
                      vm_ram: 16384  # Size in MiB
                    compute2-vm-compute-1:
                      vm_image_name: centos7
                    compute2-vm-compute-2:
                      vm_image_name: centos7
                    compute2-vm-compute-1-gfx:
                      vm_image_name: centos7
                      vm_passthrough_lookup_regex: '.*Ellesmere.*'
                      vm_bootable_iso: Win10_1909_English_x64.iso
                      vm_variant: win10
                      vm_cores: 8  # Number of cores
                      vm_ram: 16384  # Size in MiB
                      vm_additional_isos:
                        - virtio-win-0.1.171.iso
                provisioned_compute1:
                  vars:
                    vm_virt_host: "compute1"
                    vm_cores: 6  # Number of cores
                    vm_ram: 16384  # Size in MiB
                    vm_disk_size: 72  # Size in GiB
                    undercloud_target: true
                  hosts:
                    compute1-vm-1:
                      vm_image_name: centos7
                    compute1-vm-2:
                      vm_image_name: centos7
                    compute1-vm-3:
                      vm_image_name: centos7
                provisioned_rhel_compute1:
                  vars:
                    vm_virt_host: "compute1"
                    vm_cores: 8  # Number of cores
                    vm_ram: 8192  # Size in MiB
                    vm_disk_size: 72  # Size in GiB
                    vm_networks:
                      uplink:
                        dhcp: true
                        interface: eth0
                        manager: nmcli
                        router: 172.16.27.44
                        dns:
                          - 10.11.5.19
                          - 10.5.30.160
                      provisioning:
                        dhcp: false
                        interface: eth1
                        manager: nmcli
                      external:
                        dhcp: false
                        interface: eth2
                        manager: nmcli
                    undercloud_target: true
                  hosts:
                    compute1-rhel-vm-1:
                      vm_image_name: rhel8
        bootable_vms:
          vars:
            vm_networks:
              provisioning:
                dhcp: true
                interface: eth0
                manager: nmcli
              external:
                dhcp: false
                interface: eth1
                manager: nmcli
          children:
            bootable_compute_hosts:
              children:
                bootable_compute2:
                  vars:
                    vm_virt_host: "compute2"
                    vm_cores: 8
                    vm_ram: 8192
                    vm_disk_size: 96
                    capabilities: boot_option:local,profile:compute
                  hosts:
                    osp-compute2-vm-controller-1:
                      vm_vbmc_port: 16020
                      capabilities: boot_option:local,profile:controller
                    osp-compute2-vm-controller-2:
                      vm_vbmc_port: 16021
                      capabilities: boot_option:local,profile:controller
                    osp-compute2-vm-controller-3:
                      vm_vbmc_port: 16022
                      capabilities: boot_option:local,profile:controller
                    osp-compute2-vm-compute-0:
                      vm_cores: 2
                      vm_ram: 4096
                      vm_vbmc_port: 16023
                      vm_disk_size: 32
                    osp-compute2-vm-compute-1:
                      vm_cores: 2
                      vm_ram: 4096
                      vm_vbmc_port: 16024
                      vm_disk_size: 32
                    osp-compute2-vm-compute-2:
                      vm_cores: 2
                      vm_ram: 4096
                      vm_vbmc_port: 16025
                      vm_disk_size: 32
                    osp-compute2-vm-compute-3:
                      vm_cores: 2
                      vm_ram: 4096
                      vm_vbmc_port: 16026
                      vm_disk_size: 32
                    osp-compute2-vm-compute-4:
                      vm_cores: 2
                      vm_ram: 4096
                      vm_vbmc_port: 16027
                      vm_disk_size: 32
                    osp-compute2-vm-compute-5:
                      vm_cores: 2
                      vm_ram: 4096
                      vm_vbmc_port: 16028
                      vm_disk_size: 32
                    osp-compute2-vm-compute-6:
                      vm_cores: 2
                      vm_ram: 4096
                      vm_vbmc_port: 16029
                      vm_disk_size: 32
                    osp-compute2-vm-compute-7:
                      vm_cores: 2
                      vm_ram: 4096
                      vm_vbmc_port: 16030
                      vm_disk_size: 32
                    osp-compute2-vm-compute-8:
                      vm_cores: 2
                      vm_ram: 4096
                      vm_vbmc_port: 16031
                      vm_disk_size: 32
                    osp-compute2-vm-compute-9:
                      vm_cores: 2
                      vm_ram: 4096
                      vm_vbmc_port: 16032
                      vm_disk_size: 32
