all:
  vars:
    ansible_python_interpreter: "/usr/bin/python3"
    ansible_ssh_common_args: >-
      -o UserKnownHostsFile=/dev/null
      -o StrictHostKeyChecking=no
      -o Compression=no
      -o TCPKeepAlive=yes
      -o VerifyHostKeyDNS=no
      -o ForwardX11=no
      -o ForwardAgent=no
  children:
    all_vms:
      vars:
        ansible_become: true
        ansible_become_user: "root"
        ansible_user: "root"
        vm_vbmc_username: admin
        vm_vbmc_password: secrete
      children:
        provisioned_vms:
          vars:
            vm_networks:
              uplink:
                dhcp: true
                interface: eth0
                manager: nmcli
              provisioning:
                dhcp: false
                interface: eth1
                manager: nmcli
              external:
                dhcp: false
                interface: eth2
                manager: nmcli
          children:
            provisioned_compute_hosts:
              children:
                provisioned_compute2:
                  vars:
                    vm_virt_host: "compute2"
                    vm_cores: 6  # Number of cores
                    vm_ram: 8192  # Size in MiB
                    vm_disk_size: 72  # Size in GiB
                    vm_image_name: centos7  # Set the base image used for raw vms
                  hosts:
                    compute2-vm-1: {}
                    compute2-vm-2: {}
                    compute2-vm-3: {}
                    compute2-vm-4: {}
                    compute2-vm-5: {}
                provisioned_compute1:
                  vars:
                    vm_virt_host: "compute1"
                    vm_cores: 6  # Number of cores
                    vm_ram: 8192  # Size in MiB
                    vm_disk_size: 72  # Size in GiB
                  hosts:
                    compute1-vm-1:
                      vm_image_name: centos7
                    compute1-vm-2:
                      vm_image_name: centos7
                    compute1-vm-3:
                      vm_image_name: centos7
                    compute1-vm-4:
                      vm_image_name: centos7
        bootable_vms:
          vars:
            vm_networks:
              provisioning:
                dhcp: true
                interface: eth0
                manager: nmcli
              external:
                dhcp: false
                interface: eth1
                manager: nmcli
          children:
            bootable_compute_hosts:
              children:
                bootable_compute2:
                  vars:
                    vm_virt_host: "compute2"
                    vm_cores: 8
                    vm_ram: 16384
                    vm_disk_size: 96
                  hosts:
                    osp-compute2-vm-controller-1:
                      vm_vbmc_port: 16020
                    osp-compute2-vm-controller-2:
                      vm_vbmc_port: 16021
                    osp-compute2-vm-controller-3:
                      vm_vbmc_port: 16022
                    osp-compute2-vm-compute-1:
                      vm_cores: 4
                      vm_ram: 4096
                      vm_vbmc_port: 16030
                    osp-compute2-vm-compute-2:
                      vm_cores: 4
                      vm_ram: 4096
                      vm_vbmc_port: 16031
                bootable_compute1:
                  vars:
                    vm_virt_host: "compute1"
                    vm_cores: 8
                    vm_ram: 16384
                    vm_disk_size: 96
                  hosts:
                    osp-compute1-vm-controller-1:
                      vm_vbmc_port: 16020
                    osp-compute1-vm-controller-2:
                      vm_vbmc_port: 16021
                    osp-compute1-vm-controller-3:
                      vm_vbmc_port: 16022
                    osp-compute1-vm-compute-1:
                      vm_cores: 4
                      vm_ram: 4096
                      vm_vbmc_port: 16030
                    osp-compute1-vm-compute-2:
                      vm_cores: 4
                      vm_ram: 4096
                      vm_vbmc_port: 16031
