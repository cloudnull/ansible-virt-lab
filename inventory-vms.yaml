---

all:
  children:
    all_vms:
      vars:
        tripleo_magic_number: 4
        vm_vbmc_username: admin
        vm_vbmc_password: secrete
        vm_management_net: "{{ vm_preprov_networks['eth1'][0] }}"
      children:
        provisioned_vms:
          vars:
            vm_networks:
              uplink:
                dhcp: true
                interface: eth0
                manager: nmcli
              provisioning:
                dhcp: false
                interface: eth1
                manager: nmcli
              external:
                dhcp: false
                interface: eth2
                manager: nmcli
          children:
            provisioned_compute_hosts:
              children:
                provisioned_compute2:
                  vars:
                    vm_virt_host: "compute2"
                    vm_cores: 4  # Number of cores
                    vm_ram: 4096  # Size in MiB
                    vm_disk_size: 72  # Size in GiB
                    tripleo_deploy_type: novacompute
                    overcloud_target: true
                  hosts:
                    compute2-vm-controller-1:
                      vm_image_name: centos7
                      tripleo_deploy_type: controller
                      vm_cores: 6  # Number of cores
                      vm_ram: 16384  # Size in MiB
                      vm_preprov_networks:
                        eth1:
                          - "192.168.4.101/22"
                    compute2-vm-compute-1:
                      vm_image_name: centos7
                      vm_preprov_networks:
                        eth1:
                          - "192.168.4.102/22"
                    compute2-vm-compute-2:
                      vm_image_name: centos7
                      vm_preprov_networks:
                        eth1:
                          - "192.168.4.103/22"
                    compute2-vm-compute-3:
                      vm_image_name: centos7
                      vm_preprov_networks:
                        eth1:
                          - "192.168.4.104/22"
                    compute2-vm-compute-4:
                      vm_image_name: centos7
                      vm_preprov_networks:
                        eth1:
                          - "192.168.4.105/22"
                    compute2-vm-compute-5:
                      vm_image_name: centos7
                      vm_preprov_networks:
                        eth1:
                          - "192.168.4.106/22"
                    compute2-vm-compute-6:
                      vm_image_name: centos7
                      vm_preprov_networks:
                        eth1:
                          - "192.168.4.107/22"
                    compute2-vm-compute-7:
                      vm_image_name: centos7
                      vm_preprov_networks:
                        eth1:
                          - "192.168.4.108/22"
                    compute2-vm-compute-8:
                      vm_image_name: centos7
                      vm_preprov_networks:
                        eth1:
                          - "192.168.4.109/22"
                    compute2-vm-compute-9:
                      vm_image_name: centos7
                      vm_preprov_networks:
                        eth1:
                          - "192.168.4.110/22"
                    compute2-vm-compute-10:
                      vm_image_name: centos7
                      vm_preprov_networks:
                        eth1:
                          - "192.168.4.111/22"
                provisioned_compute1:
                  vars:
                    vm_virt_host: "compute1"
                    vm_cores: 8  # Number of cores
                    vm_ram: 16384  # Size in MiB
                    vm_disk_size: 72  # Size in GiB
                    undercloud_target: true
                  hosts:
                    compute1-vm-1:
                      vm_image_name: centos8
                      vm_preprov_networks:
                        eth1:
                          - "192.168.3.101/22"
                provisioned_rhel_compute1:
                  vars:
                    vm_virt_host: "compute1"
                    vm_cores: 8  # Number of cores
                    vm_ram: 8192  # Size in MiB
                    vm_disk_size: 72  # Size in GiB
                    vm_networks:
                      uplink:
                        dhcp: true
                        interface: eth0
                        manager: nmcli
                        router: 172.16.27.44
                        dns:
                          - 10.11.5.19
                          - 10.5.30.160
                      provisioning:
                        dhcp: false
                        interface: eth1
                        manager: nmcli
                      external:
                        dhcp: false
                        interface: eth2
                        manager: nmcli
                    undercloud_target: true
                  hosts:
                    compute1-rhel-vm-1:
                      vm_image_name: rhel8
                      compute1-vm-3:
                        vm_image_name: centos7
                        vm_preprov_networks:
                          eth1:
                            - "192.168.4.107/22"
                provisioned_compute4:
                  vars:
                    vm_virt_host: "compute4"
                    vm_cores: 6  # Number of cores
                    vm_ram: 16384  # Size in MiB
                    vm_disk_size: 72  # Size in GiB
                    undercloud_target: true
                  hosts:
                    compute4-vm-1:
                      vm_image_name: centos7
                    # compute4-vm-3-gfx:
                    #   vm_passthrough_lookup_regex: '.*Ellesmere.*'
                    #   vm_bootable_iso: Win10_1909_English_x64.iso
                    #   vm_variant: win10
                    #   vm_cores: 8  # Number of cores
                    #   vm_ram: 16384  # Size in MiB
                    #   vm_additional_isos:
                    #     - virtio-win-0.1.171.iso
        # bootable_vms:
        #   vars:
        #     vm_networks:
        #       provisioning:
        #         dhcp: true
        #         interface: eth0
        #         manager: nmcli
        #       external:
        #         dhcp: false
        #         interface: eth1
        #         manager: nmcli
        #   children:
        #     bootable_compute_hosts:
        #       children:
        #         bootable_compute2:
        #           vars:
        #             vm_virt_host: "compute2"
        #             vm_cores: 8
        #             vm_ram: 8192
        #             vm_disk_size: 96
        #             tripleo_capabilities: boot_option:local,profile:compute
        #           hosts:
        #             osp-compute2-vm-controller-1:
        #               vm_vbmc_port: 16020
        #               tripleo_capabilities: boot_option:local,profile:controller
        #             osp-compute2-vm-controller-2:
        #               vm_vbmc_port: 16021
        #               tripleo_capabilities: boot_option:local,profile:controller
        #             osp-compute2-vm-controller-3:
        #               vm_vbmc_port: 16022
        #               tripleo_capabilities: boot_option:local,profile:controller
        #             osp-compute2-vm-compute-0:
        #               vm_cores: 2
        #               vm_ram: 4096
        #               vm_vbmc_port: 16023
        #               vm_disk_size: 32
        #             osp-compute2-vm-compute-1:
        #               vm_cores: 2
        #               vm_ram: 4096
        #               vm_vbmc_port: 16024
        #               vm_disk_size: 32
        #             osp-compute2-vm-compute-2:
        #               vm_cores: 2
        #               vm_ram: 4096
        #               vm_vbmc_port: 16025
        #               vm_disk_size: 32
